@model FCStore.Models.Product

<div id="PD_View">
    <div id="categoryNav">
        <div>货品类别：</div>
    @{
        FCStore.Models.Category tmpCate = Model.Category;
        int CID = -1;
        string htmlStr = "";
        while (CID != tmpCate.CID)
        {
            htmlStr = "<div><a href=\"/Product/ListByCategory/" + tmpCate.CID + "\">" + tmpCate.NameStr + "</a></div><div>></div>" + htmlStr;
            CID = tmpCate.CID;
            tmpCate = tmpCate.Parent;
        }
        IHtmlString html = new HtmlString(htmlStr);
        @html
    }
        <div>商品详情</div>
    </div>
    <div class="top">
        <div id="preview">
            <div class="jqzoom" id="spec-n1">
                @if (Model.ImgPathArr.Length > 0)
                {
                    <img id="productImage" src="@(Model.ImgPathArr[0])" />
                }
            </div>
            <div id="spec-n5" class="picNav">
                <div class="control" id="spec-left"></div>
                <div class="content" id="spec-list">
                    <div>
                        <ul class="ILUl">
                            @{
                                foreach (string tmpSrc in Model.ImgPathArr)
                                {
                                    <li>
                                        <img src="@(tmpSrc)" jqimg="@(tmpSrc)" />
                                    </li>
                                }
                            }
                        </ul>
                    </div>
                </div>
                <div class="control" id="spec-right"></div>
            </div>
        </div>
        <div id="productInfo">
            <div id="productTitle">
                @(Model.Title)
            </div>
            <div id="productBrand">
                <div class="title">
                    品牌：
                </div>
                <div class="content">
                    <a href="/Brand/ProductList/@(Model.Brand.BID)">
                        <div class="brandName">@(Model.Brand.NameStr)</div>
                        <img src="/Brand/@(Model.Brand.Tag).jpg" alt="@(Model.Brand.Name2)" />
                    </a>
                </div>
            </div>
            <div id="productPrice">
                <div class="title">代购价：</div>
                <div class="content price">￥@(Model.Price)</div>
                <div class="title">市场价：</div>
                <div class="content marketPrice">￥@(Model.MarketPrice)</div>
            </div>
            <div id="productSaleCount">
                <div class="title">已售出：</div>@(Model.Sale)
            </div>
            <div id="productSaleType">
                <div class="title">
                    支付方式：
                </div>
                <div class="content">
                    支付宝
                </div>
            </div>
            <div id="productSend">
                <div class="title">
                    配送方式：
                </div>
                <div class="content">
                    美国直邮至仓库，再邮寄至客户地址
                </div>
            </div>
            <div id="productChoose">
                @{
                    if (!string.IsNullOrEmpty(Model.Chose)) 
                    {
                        Newtonsoft.Json.Linq.JArray jArr = Newtonsoft.Json.Linq.JArray.Parse(Server.HtmlDecode(Model.Chose));
                        foreach (Newtonsoft.Json.Linq.JObject item in jArr)
                        {
                            <div class="choseItem">
                                <label class="title"> @(item["title"])：</label>
                                @{
                                    bool tag = true;
                                    foreach(Newtonsoft.Json.Linq.JObject vItem in (Newtonsoft.Json.Linq.JArray) item["values"])
                                    {
                                        <span class="cValue @(tag ? "sel" : "" )" onclick="ProductDetail.onChoseItemClick(this)">@(vItem["name"])</span>
                                        tag = false;
                                    }
                                }
                                <div class="pullupDiv"></div>
                            </div>
                        }
                    }
                }
            </div>
            <div id="productSaleInput">
                <div class="title">
                    购买数量：
                </div>
                <div class="content">
                    <div class="spinnerLeft"></div>
                    <input class="spinner" value="1" type="text" />
                    <div class="spinnerRight"></div>
                    <div class="pullupDiv"></div>
                </div>
            </div>
            <div id="productCode">
                <div class="title">
                    编号：
                </div>
                <div class="content">
                    @(Model.PID)
                </div>
                <div class="pullupDiv"></div>
            </div>
            <div id="productBtn" class="p1">
                <div class="p2">
                    <button id="buyBtn" >购买</button>
                </div>
                <div class="p2">
                    <button id="keepBtn" >收藏</button>
                </div>
            </div>
        </div>
    </div>
    <div id="descriptContent">
        @{
            html = new HtmlString(Model.Descript);
            @html
        }
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/productDetail")
}
